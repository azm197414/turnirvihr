<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ "–í–∏—Ö—Ä—å" - –ü–†–û–°–ú–û–¢–†</title>
    <style>
        /* –¢–í–û–ô CSS –∏–∑ index.html - —Å–∫–æ–ø–∏—Ä—É–π –í–ï–°–¨ –±–ª–æ–∫ <style> */
        /* –ù–∞—á–∏–Ω–∞—è –æ—Ç <style> –¥–æ </style> */
    </style>
</head>
<body>
    <!-- –ö–û–ù–¢–ï–ô–ù–ï–† (–ë–ï–ó —Ñ–æ—Ä–º—ã –ø–∞—Ä–æ–ª—è!) -->
    <div class="container">
        <div class="main-title">
            –¢–ê–ë–õ–ò–¶–ê –ë–û–õ–¨–®–û–ì–û –ó–ò–ú–ù–ï–ì–û –¢–£–†–ù–ò–†–ê –ö–õ–£–ë–ê –ü–ò–õ–û–¢–û–í –ë–ü–õ–ê "–í–ò–•–†–¨" - –û–ù–õ–ê–ô–ù-–ü–†–û–°–ú–û–¢–†
        </div>

        <div id="statusBar" style="margin-bottom: 15px;">
            <div class="sync-status online">
                <span class="sync-indicator online"></span>
                <span>üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥</span>
            </div>
            <div id="lastUpdate" style="color: #7f8c8d; font-size: 0.9em; margin-top: 5px;">
                –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –∑–∞–≥—Ä—É–∂–∞–µ–º...
            </div>
        </div>

        <!-- –¢–ê–ë–õ–ò–¶–ê -->
        <table class="tournament-table" id="tournamentTable">
            <!-- –°–∫–æ–ø–∏—Ä—É–π –í–°–Æ —Ç–∞–±–ª–∏—Ü—É –∏–∑ index.html -->
            <!-- –û—Ç <table class="tournament-table" –¥–æ </table> -->
        </table>

        <div class="notes">
            <p><strong>–û–Ω–ª–∞–π–Ω-–ø—Ä–æ—Å–º–æ—Ç—Ä:</strong> –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞. 
               –î–ª—è –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É —Ç—É—Ä–Ω–∏—Ä–∞.</p>
            <p id="updateInfo">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>
    </div>

    <script>
        // ========== –ù–ê–°–¢–†–û–ô–ö–ò ==========
        const REPO = 'azm197414/turnirvihr';
        const DATA_FILE = 'turnir_data.json';
        const DATA_URL = `https://raw.githubusercontent.com/${REPO}/main/${DATA_FILE}`;

        // ========== –î–ê–ù–ù–´–ï –£–ß–ê–°–¢–ù–ò–ö–û–í ==========
        const participants = [
            { team: "–ò–Ω—Ç–µ–Ω—Å–∏–≤", name: "–ö—Å–µ–Ω–∏—è –õ.", id: 1, teamIndex: 0 },
            { team: "–ò–Ω—Ç–µ–Ω—Å–∏–≤", name: "–°–≤—è—Ç–æ—Å–ª–∞–≤ –ï.", id: 2, teamIndex: 0 },
            { team: "–ü—Ä–æ—Ä—ã–≤", name: "–ù–∏–∫–∏—Ç–∞ –£.", id: 3, teamIndex: 1 },
            { team: "–ü—Ä–æ—Ä—ã–≤", name: "–í–∞—Ä—è –ê.", id: 4, teamIndex: 1 },
            { team: "–ê–ª—å—Ñ–∞", name: "–î–º–∏—Ç—Ä–∏–π –í.", id: 5, teamIndex: 2 },
            { team: "–ê–ª—å—Ñ–∞", name: "–ò–≤–∞–Ω –§.", id: 6, teamIndex: 2 },
            { team: "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", name: "–°–∞–≤–µ–ª–∏–π –°.", id: 7, teamIndex: 3 },
            { team: "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", name: "–ë–æ–≥–¥–∞–Ω –ï.", id: 8, teamIndex: 3 },
            { team: "–ú–æ—Ç–∏–≤–∞—Ü–∏—è", name: "–ê—Ä—Ç–µ–º –ü.", id: 9, teamIndex: 4 },
            { team: "–ú–æ—Ç–∏–≤–∞—Ü–∏—è", name: "–î–∞–Ω–∏–ª–∞ –õ.", id: 10, teamIndex: 4 }
        ];

        // ========== –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• ==========
        async function loadTournamentData() {
            try {
                const response = await fetch(DATA_URL + '?t=' + Date.now());
                if (!response.ok) throw new Error('–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω');
                
                const data = await response.json();
                updateTable(data);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è
                const now = new Date();
                document.getElementById('lastUpdate').textContent = 
                    `–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ${now.toLocaleTimeString('ru-RU')}`;
                document.getElementById('updateInfo').textContent = 
                    `–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã: ${now.toLocaleString('ru-RU')}`;
                    
                return true;
            } catch (error) {
                document.getElementById('updateInfo').textContent = 
                    '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –¢—É—Ä–Ω–∏—Ä –µ—â—ë –Ω–µ –Ω–∞—á–∞–ª—Å—è –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.';
                console.warn('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                return false;
            }
        }

        // ========== –û–ë–ù–û–í–õ–ï–ù–ò–ï –¢–ê–ë–õ–ò–¶–´ ==========
        function updateTable(data) {
            // –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
            if (!document.getElementById('tournamentTable').rows.length > 3) {
                createTable();
            }
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            for (let i = 0; i < participants.length; i++) {
                const pData = data[`participant_${i}`];
                if (pData) {
                    document.getElementById(`angle_${i}`).textContent = pData.angle || '0';
                    document.getElementById(`time_lz_${i}`).textContent = pData.timeLz || '00:00:00';
                    document.getElementById(`time_kz_${i}`).textContent = pData.timeKz || '00:00:00';
                    document.getElementById(`laps_${i}`).textContent = pData.laps || '0';
                    document.getElementById(`penalty_gates_${i}`).textContent = pData.penalty_gates || '0';
                    document.getElementById(`penalty_fall_${i}`).textContent = pData.penalty_fall || '0';
                    document.getElementById(`penalty_flip_${i}`).textContent = pData.penalty_flip || '0';
                }
            }
            
            // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º
            calculateAll();
        }

        // ========== –°–û–ó–î–ê–ù–ò–ï –¢–ê–ë–õ–ò–¶–´ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ index.html) ==========
        function createTable() {
            const table = document.getElementById('tournamentTable');
            // ... (–≤—Å—Ç–∞–≤—å —Ñ—É–Ω–∫—Ü–∏—é createTable –∏–∑ —Ç–≤–æ–µ–≥–æ index.html) ...
        }

        // ========== –§–£–ù–ö–¶–ò–ò –†–ê–°–ß–ï–¢–ê (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ index.html) ==========
        function calculateAll() {
            // ... (–≤—Å—Ç–∞–≤—å —Ñ—É–Ω–∫—Ü–∏—é calculateAll –∏–∑ —Ç–≤–æ–µ–≥–æ index.html) ...
            // –£–î–ê–õ–ò —á–∞—Å—Ç–∏ –ø—Ä–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ–Ω–ª–∞–π–Ω-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
        }

        function timeToSeconds(timeStr) {
            // ... (–≤—Å—Ç–∞–≤—å –∏–∑ index.html) ...
        }

        function secondsToTime(seconds) {
            // ... (–≤—Å—Ç–∞–≤—å –∏–∑ index.html) ...
        }

        // ========== –ó–ê–ü–£–°–ö ==========
        document.addEventListener('DOMContentLoaded', function() {
            // –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É
            createTable();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É
            loadTournamentData();
            
            // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(loadTournamentData, 30000);
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            document.querySelectorAll('input, button').forEach(el => {
                if (el.tagName === 'INPUT') el.disabled = true;
                if (el.onclick && el.onclick.toString().includes('saveOnlineData')) {
                    el.style.display = 'none';
                }
            });
        });

        // –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        console.log('%c üîí –†–ï–ñ–ò–ú –ü–†–û–°–ú–û–¢–†–ê üîí', 'color: #2c3e50; font-size: 16px; font-weight: bold;');
        console.log('–¢–∞–±–ª–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.');
    </script>
</body>
</html>
